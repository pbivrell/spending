<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	</head>
	<body>	
		<p>Logged in as <b><span id="current">N/A</span></b> | role <span id="role">N/A</span></p>
		<h1> Create </h1>
		<form id="myForm">
			<label for="username">Username:</label><br>
			<input type="text" id="username"><br><br>
			<label for="password">Password:</label><br>
			<input type="password" id="password"><br><br>
			<label for="role">Role:</label><br>
			<input type="number" id="in_role"><br><br>
			<label for="email">Email:</label><br>
			<input type="text" id="email"><br><br>
			<button type="button" onclick="blah()">Submit</button>
		</form>
	</body>

	<script>

		function blah(){

			var data = {
				"username": $("#username")[0].value,
				"password": $("#password")[0].value,
				"role": parseInt($("#in_role")[0].value),
				"email": $("#email")[0].value,
			};

			$.ajax({
				type: "POST",
				url: "/api/v1/user",
				data: JSON.stringify(data),
				success: function(output, status, xhr) {
					alert("Created user");
				},
				error: function(output, status, xhr) {
					alert("Create user error");
				},
				contentType : "application/json"
			});
			return false;
		}

		function getUser() {
			$.ajax({
				type: "GET",
				url: "/api/v1/user",
				success: function(output, status, xhr) {
					var data = JSON.parse(output);
					$("#current").text(data.username);
					$("#role").text(data.role);
				},
				contentType : "application/json"
			});

		}

		$(document).ready(function(){
			getUser();
		})
	</script>
</html>

